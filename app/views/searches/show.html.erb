<div class="grid_49">
  <div class="search_controls">
    
    <div id="keywords_option" class="option">
      <%= form_for Search.new(:keywords => @search.keywords) do |f| %>
        <div id="keywords_label" class="label">
          <%= f.label :keywords %>
        </div>
        <div id="keywords_control" class="value">
          <div>
            <%= f.text_field :keywords, :class => "text_box" %>
            <%= f.submit "Search" %>
          </div>
        </div>
      <% end %>
    </div>
    
    <%= search_option "search_phase" do %>
      <span id='phase'>
        <%= @search.phase %>
      </span>
      <%= check_box_tag :running, 1, params[:display].nil? %>
    <% end %>

    <%= search_option "layer" do %>
      <%= select_tag :layer, options_for_select([["neighbor hitmap", "neighbor"], ["degree hitmap", "degree"]]) %>
    <% end %>

    <%= search_option "level" do %>
      <%= select_tag :level, options_for_select((0..6).entries.map { |i|
          ["Level #{i} (#{number_to_human 50*5**i, :units => {:unit => "m", :thousand => "km"}})", i]}) %>
    <% end %>
    
    <%= search_option "available_points" do %>
      <%= @search.statistics["available_points"] %>
    <% end %>

    <%= search_option "visible_points" do %>
      <%= @search.statistics["visible_points"] %>
    <% end %>

    <%= search_option "visible_tiles" do %>
      <%= @search.statistics["visible_tiles"] %>
    <% end %>

    <%= search_option "hottest_tiles" do %>
      <%= "" %>
    <% end %>
    
    <div id="map_wrapper">
      <div id="map">

      </div>
    </div>
    
    <%= search_option "hottest_tiles_degree" do %>
      <%= "" %>
    <% end %>

    <%= search_option "degree_range" do %>
      <%= "" %>
    <% end %>
    
    <%= search_option "neighbor_range" do %>
      <%= "" %>
    <% end %>
    
    <%= search_option "selected_tile" do %>
      <%= "" %>
    <% end %>
    
    <%= search_option "selected_tile_degree" do %>
      <%= "" %>
    <% end %>
    
    <%= search_option "selected_tile_neighbors" do %>
      <%= "" %>
    <% end %>
    
    <%= search_option "current_input_tile", "smaller_value" do %>
      <%= "" %>
    <% end %>  
    
    <%= search_option "pan_map_to_input_cell" do %>
      <%= check_box_tag :pan_map, 'input', true %>
    <% end %>  
    
    <%= search_option "pan_map_to_hottest_cell" do %>
      <%= check_box_tag :pan_map, 'hottest', true %>
    <% end %>    
    
    <%= search_option " " do %>
      <%= "" %>
    <% end %>  
    
    <%= search_option " " do %>
      <%= "" %>
    <% end %>  
    
    <%= search_option " " do %>
      <%= "" %>
    <% end %>  
    
    <%= search_option " " do %>
      <%= "" %>
    <% end %>  
    
    <%= search_option " " do %>
      <%= "" %>
    <% end %>  
    
    <%= search_option " " do %>
      <%= "" %>
    <% end %>  
    
    <%= search_option "navigation" do %>
      <%= link_to image_tag("reload.png", :size => "16x16", :style => "position:absolute; top:2px;"), @search,
                  :style => "position:relative; display:inline-block; width:16px; height:16px;" %>
      <%= link_to "[&raquo;XP]".html_safe, search_path(@search, :restart_exploratory => 1) %>
      <%= link_to "[&raquo;RF]".html_safe, search_path(@search, :restart_refinement => 1) %>
      <%= link_to "[Back]", searches_path %>
    <% end %>  
    
    <%= search_option "exploratory_pages", "double_width" do %>
      <%= @search.statistics["degrees"] %>
    <% end %>
    
    <%= search_option "refinement_boxes", "double_width" do %>
      <%= @search.statistics["degrees"] %>
    <% end %>
    
  </div>
</div>
<div id="jeocrowd_config">
  <%= @search.attributes.to_json %>
</div>